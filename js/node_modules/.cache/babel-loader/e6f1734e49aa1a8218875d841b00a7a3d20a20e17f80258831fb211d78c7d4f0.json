{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Joystick = void 0;\nvar React = require(\"react\");\nvar shape_enum_1 = require(\"./enums/shape.enum\");\nvar shape_factory_1 = require(\"./shapes/shape.factory\");\nvar shape_bounds_factory_1 = require(\"./shapes/shape.bounds.factory\");\nvar InteractionEvents;\n(function (InteractionEvents) {\n  InteractionEvents[\"PointerDown\"] = \"pointerdown\";\n  InteractionEvents[\"PointerMove\"] = \"pointermove\";\n  InteractionEvents[\"PointerUp\"] = \"pointerup\";\n})(InteractionEvents || (InteractionEvents = {}));\n/**\r\n * Radians identifying the direction of the joystick\r\n */\nvar RadianQuadrantBinding;\n(function (RadianQuadrantBinding) {\n  RadianQuadrantBinding[RadianQuadrantBinding[\"TopRight\"] = 2.35619449] = \"TopRight\";\n  RadianQuadrantBinding[RadianQuadrantBinding[\"TopLeft\"] = -2.35619449] = \"TopLeft\";\n  RadianQuadrantBinding[RadianQuadrantBinding[\"BottomRight\"] = 0.785398163] = \"BottomRight\";\n  RadianQuadrantBinding[RadianQuadrantBinding[\"BottomLeft\"] = -0.785398163] = \"BottomLeft\";\n})(RadianQuadrantBinding || (RadianQuadrantBinding = {}));\nvar Joystick = /** @class */function (_super) {\n  __extends(Joystick, _super);\n  function Joystick(props) {\n    var _this = _super.call(this, props) || this;\n    _this._stickRef = React.createRef();\n    _this._baseRef = React.createRef();\n    _this.frameId = null;\n    _this._pointerId = null;\n    _this._mounted = false;\n    /**\r\n     * Calculate X/Y and ArcTan within the bounds of the joystick\r\n     * @param event\r\n     * @private\r\n     */\n    _this._pointerMove = function (event) {\n      event.preventDefault();\n      if (_this.state.dragging) {\n        if (!_this.props.followCursor && event.pointerId !== _this._pointerId) return;\n        var absoluteX = event.clientX;\n        var absoluteY = event.clientY;\n        var relativeX = absoluteX - _this._parentRect.left - _this._radius;\n        var relativeY = absoluteY - _this._parentRect.top - _this._radius;\n        var dist = _this._distance(relativeX, relativeY);\n        // @ts-ignore\n        var bounded = (0, shape_bounds_factory_1.shapeBoundsFactory)(\n        //@ts-ignore\n        _this.props.controlPlaneShape || _this.props.baseShape, absoluteX, absoluteY, relativeX, relativeY, dist, _this._radius, _this._baseSize, _this._parentRect);\n        relativeX = bounded.relativeX;\n        relativeY = bounded.relativeY;\n        var atan2 = Math.atan2(relativeX, relativeY);\n        _this._updatePos({\n          relativeX: relativeX,\n          relativeY: relativeY,\n          distance: _this._distanceToPercentile(dist),\n          direction: _this._getDirection(atan2),\n          axisX: absoluteX - _this._parentRect.left,\n          axisY: absoluteY - _this._parentRect.top\n        });\n      }\n    };\n    /**\r\n     * Handle pointer up and de-register listen events\r\n     * @private\r\n     */\n    _this._pointerUp = function (event) {\n      if (event.pointerId !== _this._pointerId) return;\n      var stateUpdate = {\n        dragging: false\n      };\n      if (!_this.props.sticky) {\n        stateUpdate.coordinates = undefined;\n      }\n      _this.frameId = window.requestAnimationFrame(function () {\n        if (_this._mounted) {\n          _this.setState(stateUpdate);\n        }\n      });\n      window.removeEventListener(InteractionEvents.PointerUp, _this._pointerUp);\n      window.removeEventListener(InteractionEvents.PointerMove, _this._pointerMove);\n      _this._pointerId = null;\n      if (_this.props.stop) {\n        _this.props.stop({\n          type: \"stop\",\n          // @ts-ignore\n          x: _this.props.sticky ? _this.state.coordinates.relativeX * 2 / _this._baseSize : null,\n          // @ts-ignore\n          y: _this.props.sticky ? _this.state.coordinates.relativeY * 2 / _this._baseSize : null,\n          // @ts-ignore\n          direction: _this.props.sticky ? _this.state.coordinates.direction : null,\n          // @ts-ignore\n          distance: _this.props.sticky ? _this.state.coordinates.distance : null\n        });\n      }\n    };\n    _this.state = {\n      dragging: false\n    };\n    _this._throttleMoveCallback = function () {\n      var lastCall = 0;\n      return function (event) {\n        var now = new Date().getTime();\n        var throttleAmount = _this.props.throttle || 0;\n        if (now - lastCall < throttleAmount) {\n          return;\n        }\n        lastCall = now;\n        if (_this.props.move) {\n          return _this.props.move(event);\n        }\n      };\n    }();\n    return _this;\n  }\n  Joystick.prototype.componentWillUnmount = function () {\n    var _this = this;\n    this._mounted = false;\n    if (this.props.followCursor) {\n      window.removeEventListener(InteractionEvents.PointerMove, function (event) {\n        return _this._pointerMove(event);\n      });\n    }\n    if (this.frameId !== null) {\n      window.cancelAnimationFrame(this.frameId);\n    }\n  };\n  Joystick.prototype.componentDidMount = function () {\n    var _this = this;\n    this._mounted = true;\n    if (this.props.followCursor) {\n      //@ts-ignore\n      this._parentRect = this._baseRef.current.getBoundingClientRect();\n      this.setState({\n        dragging: true\n      });\n      window.addEventListener(InteractionEvents.PointerMove, function (event) {\n        return _this._pointerMove(event);\n      });\n      if (this.props.start) {\n        this.props.start({\n          type: \"start\",\n          x: null,\n          y: null,\n          distance: null,\n          direction: null\n        });\n      }\n    }\n  };\n  /**\r\n   * Update position of joystick - set state and trigger DOM manipulation\r\n   * @param coordinates\r\n   * @private\r\n   */\n  Joystick.prototype._updatePos = function (coordinates) {\n    var _this = this;\n    this.frameId = window.requestAnimationFrame(function () {\n      if (_this._mounted) {\n        _this.setState({\n          coordinates: coordinates\n        });\n      }\n    });\n    if (typeof this.props.minDistance === 'number') {\n      if (coordinates.distance < this.props.minDistance) {\n        return;\n      }\n    }\n    this._throttleMoveCallback({\n      type: \"move\",\n      x: coordinates.relativeX * 2 / this._baseSize,\n      y: -(coordinates.relativeY * 2 / this._baseSize),\n      direction: coordinates.direction,\n      distance: coordinates.distance\n    });\n  };\n  /**\r\n   * Handle pointerdown event\r\n   * @param e PointerEvent\r\n   * @private\r\n   */\n  Joystick.prototype._pointerDown = function (e) {\n    if (this.props.disabled || this.props.followCursor) {\n      return;\n    }\n    //@ts-ignore\n    this._parentRect = this._baseRef.current.getBoundingClientRect();\n    this.setState({\n      dragging: true\n    });\n    window.addEventListener(InteractionEvents.PointerUp, this._pointerUp);\n    window.addEventListener(InteractionEvents.PointerMove, this._pointerMove);\n    this._pointerId = e.pointerId;\n    //@ts-ignore\n    this._stickRef.current.setPointerCapture(e.pointerId);\n    if (this.props.start) {\n      this.props.start({\n        type: \"start\",\n        x: null,\n        y: null,\n        distance: null,\n        direction: null\n      });\n    }\n  };\n  /**\r\n   * Use ArcTan2 (4 Quadrant inverse tangent) to identify the direction the joystick is pointing\r\n   * https://docs.oracle.com/cd/B12037_01/olap.101/b10339/x_arcsin003.htm\r\n   * @param atan2: number\r\n   * @private\r\n   */\n  Joystick.prototype._getDirection = function (atan2) {\n    if (atan2 > RadianQuadrantBinding.TopRight || atan2 < RadianQuadrantBinding.TopLeft) {\n      return \"FORWARD\";\n    } else if (atan2 < RadianQuadrantBinding.TopRight && atan2 > RadianQuadrantBinding.BottomRight) {\n      return \"RIGHT\";\n    } else if (atan2 < RadianQuadrantBinding.BottomLeft) {\n      return \"LEFT\";\n    }\n    return \"BACKWARD\";\n  };\n  /**\r\n   * Hypotenuse distance calculation\r\n   * @param x: number\r\n   * @param y: number\r\n   * @private\r\n   */\n  Joystick.prototype._distance = function (x, y) {\n    return Math.hypot(x, y);\n  };\n  Joystick.prototype._distanceToPercentile = function (distance) {\n    var percentageBaseSize = distance / (this._baseSize / 2) * 100;\n    if (percentageBaseSize > 100) {\n      return 100;\n    }\n    return percentageBaseSize;\n  };\n  /**\r\n   * Get the shape stylings for the base\r\n   * @private\r\n   */\n  Joystick.prototype.getBaseShapeStyle = function () {\n    var shape = this.props.baseShape || shape_enum_1.JoystickShape.Circle;\n    return (0, shape_factory_1.shapeFactory)(shape, this._baseSize);\n  };\n  /**\r\n   * Get the shape stylings for the stick\r\n   * @private\r\n   */\n  Joystick.prototype.getStickShapeStyle = function () {\n    var shape = this.props.stickShape || shape_enum_1.JoystickShape.Circle;\n    return (0, shape_factory_1.shapeFactory)(shape, this._baseSize);\n  };\n  /**\r\n   * Calculate base styles for pad\r\n   * @private\r\n   */\n  Joystick.prototype._getBaseStyle = function () {\n    var baseColor = this.props.baseColor !== undefined ? this.props.baseColor : \"#000033\";\n    var baseSizeString = \"\".concat(this._baseSize, \"px\");\n    var padStyle = __assign(__assign({}, this.getBaseShapeStyle()), {\n      height: baseSizeString,\n      width: baseSizeString,\n      background: baseColor,\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center'\n    });\n    if (this.props.baseImage) {\n      padStyle.background = \"url(\".concat(this.props.baseImage, \")\");\n      padStyle.backgroundSize = '100%';\n    }\n    return padStyle;\n  };\n  /**\r\n   * Calculate  base styles for joystick and translate\r\n   * @private\r\n   */\n  Joystick.prototype._getStickStyle = function () {\n    var stickColor = this.props.stickColor !== undefined ? this.props.stickColor : \"#3D59AB\";\n    var stickSize = this._stickSize ? \"\".concat(this._stickSize, \"px\") : \"\".concat(this._baseSize / 1.5, \"px\");\n    var stickStyle = __assign(__assign({}, this.getStickShapeStyle()), {\n      background: stickColor,\n      cursor: \"move\",\n      height: stickSize,\n      width: stickSize,\n      border: 'none',\n      flexShrink: 0,\n      touchAction: 'none'\n    });\n    if (this.props.stickImage) {\n      stickStyle.background = \"url(\".concat(this.props.stickImage, \")\");\n      stickStyle.backgroundSize = '100%';\n    }\n    if (this.props.pos) {\n      stickStyle = Object.assign({}, stickStyle, {\n        position: 'absolute',\n        transform: \"translate3d(\".concat(this.props.pos.x * this._baseSize / 2, \"px, \").concat(-(this.props.pos.y * this._baseSize) / 2, \"px, 0)\")\n      });\n    }\n    if (this.state.coordinates !== undefined) {\n      stickStyle = Object.assign({}, stickStyle, {\n        position: 'absolute',\n        transform: \"translate3d(\".concat(this.state.coordinates.relativeX, \"px, \").concat(this.state.coordinates.relativeY, \"px, 0)\")\n      });\n    }\n    return stickStyle;\n  };\n  Joystick.prototype.render = function () {\n    var _this = this;\n    this._baseSize = this.props.size || 100;\n    this._stickSize = this.props.stickSize;\n    this._radius = this._baseSize / 2;\n    var baseStyle = this._getBaseStyle();\n    var stickStyle = this._getStickStyle();\n    //@ts-ignore\n    return React.createElement(\"div\", {\n      \"data-testid\": \"joystick-base\",\n      className: this.props.disabled ? 'joystick-base-disabled' : '',\n      ref: this._baseRef,\n      style: baseStyle\n    }, React.createElement(\"button\", {\n      ref: this._stickRef,\n      disabled: this.props.disabled,\n      onPointerDown: function (event) {\n        return _this._pointerDown(event);\n      },\n      className: this.props.disabled ? 'joystick-disabled' : '',\n      style: stickStyle\n    }));\n  };\n  return Joystick;\n}(React.Component);\nexports.Joystick = Joystick;","map":{"version":3,"names":["React","require","shape_enum_1","shape_factory_1","shape_bounds_factory_1","InteractionEvents","RadianQuadrantBinding","Joystick","_super","__extends","props","_this","call","_stickRef","createRef","_baseRef","frameId","_pointerId","_mounted","_pointerMove","event","preventDefault","state","dragging","followCursor","pointerId","absoluteX","clientX","absoluteY","clientY","relativeX","_parentRect","left","_radius","relativeY","top","dist","_distance","bounded","shapeBoundsFactory","controlPlaneShape","baseShape","_baseSize","atan2","Math","_updatePos","distance","_distanceToPercentile","direction","_getDirection","axisX","axisY","_pointerUp","stateUpdate","sticky","coordinates","undefined","window","requestAnimationFrame","setState","removeEventListener","PointerUp","PointerMove","stop","type","x","y","_throttleMoveCallback","lastCall","now","Date","getTime","throttleAmount","throttle","move","prototype","componentWillUnmount","cancelAnimationFrame","componentDidMount","current","getBoundingClientRect","addEventListener","start","minDistance","_pointerDown","e","disabled","setPointerCapture","TopRight","TopLeft","BottomRight","BottomLeft","hypot","percentageBaseSize","getBaseShapeStyle","shape","JoystickShape","Circle","shapeFactory","getStickShapeStyle","stickShape","_getBaseStyle","baseColor","baseSizeString","concat","padStyle","__assign","height","width","background","display","justifyContent","alignItems","baseImage","backgroundSize","_getStickStyle","stickColor","stickSize","_stickSize","stickStyle","cursor","border","flexShrink","touchAction","stickImage","pos","Object","assign","position","transform","render","size","baseStyle","createElement","className","ref","style","onPointerDown","Component","exports"],"sources":["C:\\Users\\pingh\\OneDrive\\Desktop\\CG2271\\Project\\js\\node_modules\\react-joystick-component\\src\\Joystick.tsx"],"sourcesContent":["import * as React from 'react';\r\nimport {JoystickShape} from \"./enums/shape.enum\";\r\nimport {shapeFactory} from \"./shapes/shape.factory\";\r\nimport {shapeBoundsFactory} from \"./shapes/shape.bounds.factory\";\r\n\r\nexport interface IJoystickProps {\r\n    size?: number;\r\n    stickSize?: number;\r\n    baseColor?: string;\r\n    stickColor?: string;\r\n    throttle?: number;\r\n    disabled?: boolean;\r\n    sticky?: boolean;\r\n    move?: (event: IJoystickUpdateEvent) => void;\r\n    stop?: (event: IJoystickUpdateEvent) => void;\r\n    start?: (event: IJoystickUpdateEvent) => void;\r\n    stickImage?: string;\r\n    baseImage?: string;\r\n    followCursor?: boolean;\r\n    baseShape?: JoystickShape;\r\n    stickShape?: JoystickShape;\r\n    controlPlaneShape?: JoystickShape;\r\n    minDistance?: number;\r\n    pos?: {x: number, y: number};\r\n}\r\n\r\n\r\nenum InteractionEvents {\r\n    PointerDown = \"pointerdown\",\r\n    PointerMove = \"pointermove\",\r\n    PointerUp = \"pointerup\"\r\n}\r\n\r\nexport interface IJoystickUpdateEvent {\r\n    type: \"move\" | \"stop\" | \"start\";\r\n    // TODO: these could just be optional, but this may be a breaking change\r\n    x: number | null;\r\n    y: number | null;\r\n    direction: JoystickDirection | null;\r\n    distance: number | null;\r\n}\r\n\r\nexport interface IJoystickState {\r\n    dragging: boolean;\r\n    coordinates?: IJoystickCoordinates;\r\n}\r\n\r\ntype JoystickDirection = \"FORWARD\" | \"RIGHT\" | \"LEFT\" | \"BACKWARD\";\r\n\r\nexport interface IJoystickCoordinates {\r\n    relativeX: number;\r\n    relativeY: number;\r\n    axisX: number;\r\n    axisY: number;\r\n    direction: JoystickDirection;\r\n    distance: number;\r\n}\r\n\r\n\r\n/**\r\n * Radians identifying the direction of the joystick\r\n */\r\nenum RadianQuadrantBinding {\r\n    TopRight = 2.35619449,\r\n    TopLeft = -2.35619449,\r\n    BottomRight = 0.785398163,\r\n    BottomLeft = -0.785398163\r\n}\r\n\r\nclass Joystick extends React.Component<IJoystickProps, IJoystickState> {\r\n    private readonly _stickRef: React.RefObject<HTMLButtonElement> = React.createRef();\r\n    private readonly _baseRef: React.RefObject<HTMLDivElement> = React.createRef();\r\n    private readonly _throttleMoveCallback: (data: IJoystickUpdateEvent) => void;\r\n    private _baseSize: number;\r\n    private _stickSize?: number;\r\n    private frameId: number | null = null;\r\n\r\n    private _radius: number;\r\n    private _parentRect: DOMRect;\r\n    private _pointerId: number|null = null\r\n    private _mounted = false;\r\n\r\n    constructor(props: IJoystickProps) {\r\n        super(props);\r\n        this.state = {\r\n            dragging: false\r\n        };\r\n        this._throttleMoveCallback = (() => {\r\n            let lastCall = 0;\r\n            return (event: IJoystickUpdateEvent) => {\r\n\r\n                const now = new Date().getTime();\r\n                const throttleAmount = this.props.throttle || 0;\r\n                if (now - lastCall < throttleAmount) {\r\n                    return;\r\n                }\r\n                lastCall = now;\r\n                if (this.props.move) {\r\n                    return this.props.move(event);\r\n                }\r\n            };\r\n        })();\r\n\r\n\r\n\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this._mounted = false;\r\n        if (this.props.followCursor) {\r\n            window.removeEventListener(InteractionEvents.PointerMove, event => this._pointerMove(event));\r\n        }\r\n        if (this.frameId !== null) {\r\n            window.cancelAnimationFrame(this.frameId);\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this._mounted = true;\r\n        if (this.props.followCursor) {\r\n            //@ts-ignore\r\n            this._parentRect = this._baseRef.current.getBoundingClientRect();\r\n\r\n            this.setState({\r\n                dragging: true\r\n            });\r\n\r\n            window.addEventListener(InteractionEvents.PointerMove, event => this._pointerMove(event));\r\n\r\n            if (this.props.start) {\r\n                this.props.start({\r\n                    type: \"start\",\r\n                    x: null,\r\n                    y: null,\r\n                    distance: null,\r\n                    direction: null\r\n                });\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Update position of joystick - set state and trigger DOM manipulation\r\n     * @param coordinates\r\n     * @private\r\n     */\r\n    private _updatePos(coordinates: IJoystickCoordinates) {\r\n\r\n        this.frameId = window.requestAnimationFrame(() => {\r\n            if(this._mounted){\r\n                this.setState({\r\n                    coordinates,\r\n                });\r\n            }\r\n          });\r\n          \r\n        if(typeof this.props.minDistance ===  'number'){\r\n            if(coordinates.distance < this.props.minDistance){\r\n                return;\r\n            }\r\n        }\r\n        this._throttleMoveCallback({\r\n            type: \"move\",\r\n            x: ((coordinates.relativeX * 2) / this._baseSize),\r\n            y: -((coordinates.relativeY * 2) / this._baseSize),\r\n            direction: coordinates.direction,\r\n            distance: coordinates.distance\r\n        });\r\n\r\n    }\r\n\r\n    /**\r\n     * Handle pointerdown event\r\n     * @param e PointerEvent\r\n     * @private\r\n     */\r\n    private _pointerDown(e: PointerEvent) {\r\n        if (this.props.disabled || this.props.followCursor) {\r\n            return;\r\n        }\r\n        //@ts-ignore\r\n        this._parentRect = this._baseRef.current.getBoundingClientRect();\r\n\r\n        this.setState({\r\n            dragging: true\r\n        });\r\n\r\n        window.addEventListener(InteractionEvents.PointerUp, this._pointerUp);\r\n        window.addEventListener(InteractionEvents.PointerMove, this._pointerMove);\r\n        this._pointerId = e.pointerId\r\n        //@ts-ignore\r\n        this._stickRef.current.setPointerCapture(e.pointerId);\r\n\r\n        if (this.props.start) {\r\n            this.props.start({\r\n                type: \"start\",\r\n                x: null,\r\n                y: null,\r\n                distance: null,\r\n                direction: null\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n    /**\r\n     * Use ArcTan2 (4 Quadrant inverse tangent) to identify the direction the joystick is pointing\r\n     * https://docs.oracle.com/cd/B12037_01/olap.101/b10339/x_arcsin003.htm\r\n     * @param atan2: number\r\n     * @private\r\n     */\r\n    private _getDirection(atan2: number): JoystickDirection {\r\n        if (atan2 > RadianQuadrantBinding.TopRight || atan2 < RadianQuadrantBinding.TopLeft) {\r\n            return \"FORWARD\";\r\n        } else if (atan2 < RadianQuadrantBinding.TopRight && atan2 > RadianQuadrantBinding.BottomRight) {\r\n            return \"RIGHT\"\r\n        } else if (atan2 < RadianQuadrantBinding.BottomLeft) {\r\n            return \"LEFT\";\r\n        }\r\n        return \"BACKWARD\";\r\n\r\n\r\n    }\r\n\r\n    /**\r\n     * Hypotenuse distance calculation\r\n     * @param x: number\r\n     * @param y: number\r\n     * @private\r\n     */\r\n    private _distance(x: number, y: number): number {\r\n        return Math.hypot(x, y);\r\n    }\r\n    private _distanceToPercentile(distance:number): number {\r\n        const percentageBaseSize = distance / (this._baseSize/2) * 100;\r\n        if(percentageBaseSize > 100){\r\n            return 100;\r\n        }\r\n        return percentageBaseSize;\r\n    }\r\n\r\n    /**\r\n     * Calculate X/Y and ArcTan within the bounds of the joystick\r\n     * @param event\r\n     * @private\r\n     */\r\n    private _pointerMove = (event: PointerEvent) => {\r\n        event.preventDefault()\r\n        if (this.state.dragging) {\r\n            if(!this.props.followCursor && event.pointerId !== this._pointerId) return;\r\n            const absoluteX = event.clientX;\r\n            const absoluteY = event.clientY;\r\n            let relativeX = absoluteX - this._parentRect.left - this._radius;\r\n            let relativeY = absoluteY - this._parentRect.top - this._radius;\r\n            const dist = this._distance(relativeX, relativeY);\r\n            // @ts-ignore\r\n            const bounded = shapeBoundsFactory(\r\n                //@ts-ignore\r\n                this.props.controlPlaneShape || this.props.baseShape,\r\n                absoluteX,\r\n                absoluteY,\r\n                relativeX,\r\n                relativeY,\r\n                dist,\r\n                this._radius,\r\n                this._baseSize,\r\n                this._parentRect);\r\n            relativeX = bounded.relativeX\r\n            relativeY = bounded.relativeY\r\n            const atan2 = Math.atan2(relativeX, relativeY);\r\n\r\n            this._updatePos({\r\n                relativeX,\r\n                relativeY,\r\n                distance: this._distanceToPercentile(dist),\r\n                direction: this._getDirection(atan2),\r\n                axisX: absoluteX - this._parentRect.left,\r\n                axisY: absoluteY - this._parentRect.top\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n\r\n    /**\r\n     * Handle pointer up and de-register listen events\r\n     * @private\r\n     */\r\n    private _pointerUp = (event: PointerEvent) => {\r\n        if(event.pointerId !== this._pointerId) return;\r\n        const stateUpdate = {\r\n            dragging: false,\r\n        } as any;\r\n        if (!this.props.sticky) {\r\n            stateUpdate.coordinates = undefined;\r\n        }\r\n        this.frameId = window.requestAnimationFrame(() => {\r\n            if(this._mounted){\r\n                this.setState(stateUpdate);\r\n            }\r\n          });\r\n          \r\n        window.removeEventListener(InteractionEvents.PointerUp, this._pointerUp);\r\n        window.removeEventListener(InteractionEvents.PointerMove, this._pointerMove);\r\n        this._pointerId = null;\r\n        if (this.props.stop) {\r\n            this.props.stop({\r\n                type: \"stop\",\r\n                // @ts-ignore\r\n                x: this.props.sticky ? ((this.state.coordinates.relativeX * 2) / this._baseSize) : null,\r\n                // @ts-ignore\r\n                y: this.props.sticky ? ((this.state.coordinates.relativeY * 2) / this._baseSize): null,\r\n                // @ts-ignore\r\n                direction: this.props.sticky ? this.state.coordinates.direction : null,\r\n                // @ts-ignore\r\n                distance: this.props.sticky ? this.state.coordinates.distance : null\r\n\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n    /**\r\n     * Get the shape stylings for the base\r\n     * @private\r\n     */\r\n    private getBaseShapeStyle() {\r\n        const shape = this.props.baseShape || JoystickShape.Circle;\r\n        return shapeFactory(shape, this._baseSize);\r\n    }\r\n    /**\r\n     * Get the shape stylings for the stick\r\n     * @private\r\n     */\r\n    private getStickShapeStyle() {\r\n        const shape = this.props.stickShape || JoystickShape.Circle;\r\n        return shapeFactory(shape, this._baseSize);\r\n    }\r\n    /**\r\n     * Calculate base styles for pad\r\n     * @private\r\n     */\r\n    private _getBaseStyle(): any {\r\n        const baseColor: string = this.props.baseColor !== undefined ? this.props.baseColor : \"#000033\";\r\n\r\n        const baseSizeString = `${this._baseSize}px`;\r\n        const padStyle = {\r\n            ...this.getBaseShapeStyle(),\r\n            height: baseSizeString,\r\n            width: baseSizeString,\r\n            background: baseColor,\r\n            display: 'flex',\r\n            justifyContent: 'center',\r\n            alignItems: 'center',\r\n        } as any;\r\n        if (this.props.baseImage) {\r\n            padStyle.background = `url(${this.props.baseImage})`;\r\n            padStyle.backgroundSize = '100%'\r\n        }\r\n        return padStyle;\r\n\r\n    }\r\n\r\n    /**\r\n     * Calculate  base styles for joystick and translate\r\n     * @private\r\n     */\r\n    private _getStickStyle(): any {\r\n        const stickColor: string = this.props.stickColor !== undefined ? this.props.stickColor : \"#3D59AB\";\r\n        const stickSize = this._stickSize ? `${this._stickSize}px` :`${this._baseSize / 1.5}px`;\r\n\r\n        let stickStyle = {\r\n            ...this.getStickShapeStyle(),\r\n            background: stickColor,\r\n            cursor: \"move\",\r\n            height: stickSize,\r\n            width: stickSize,\r\n            border: 'none',\r\n            flexShrink: 0,\r\n            touchAction: 'none'\r\n        } as any;\r\n        if (this.props.stickImage) {\r\n            stickStyle.background = `url(${this.props.stickImage})`;\r\n            stickStyle.backgroundSize = '100%'\r\n        }\r\n        if(this.props.pos){\r\n            stickStyle = Object.assign({}, stickStyle, {\r\n                position: 'absolute',\r\n                transform: `translate3d(${(this.props.pos.x * this._baseSize)/2 }px, ${-(this.props.pos.y * this._baseSize)/2}px, 0)`\r\n            });\r\n        }\r\n\r\n        if (this.state.coordinates !== undefined) {\r\n            stickStyle = Object.assign({}, stickStyle, {\r\n                position: 'absolute',\r\n                transform: `translate3d(${this.state.coordinates.relativeX}px, ${this.state.coordinates.relativeY}px, 0)`\r\n            });\r\n        }\r\n        return stickStyle;\r\n\r\n    }\r\n\r\n    render() {\r\n        this._baseSize = this.props.size || 100;\r\n        this._stickSize = this.props.stickSize;\r\n        this._radius = this._baseSize / 2;\r\n        const baseStyle = this._getBaseStyle();\r\n        const stickStyle = this._getStickStyle();\r\n        //@ts-ignore\r\n        return (\r\n            <div data-testid=\"joystick-base\" className={this.props.disabled ? 'joystick-base-disabled' : ''}\r\n\r\n                 ref={this._baseRef}\r\n                 style={baseStyle}>\r\n                <button ref={this._stickRef}\r\n                        disabled={this.props.disabled}\r\n                        onPointerDown={(event: any) => this._pointerDown(event)}\r\n                        className={this.props.disabled ? 'joystick-disabled' : ''}\r\n                        style={stickStyle}/>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport {\r\n    Joystick\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}